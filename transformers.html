

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Transformers &mdash; pliers 0.2 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="pliers 0.2 documentation" href="index.html"/>
        <link rel="prev" title="Stims" href="stimuli.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> pliers
          

          
          </a>

          
            
            
              <div class="version">
                0.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installing pliers</a></li>
<li class="toctree-l1"><a class="reference internal" href="basic-concepts.html">Basic concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="stimuli.html">Stims</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Transformers</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#extractors">Extractors</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#list-of-extractor-classes">List of Extractor classes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-extractorresult-class">The ExtractorResult class</a></li>
<li class="toctree-l3"><a class="reference internal" href="#merging-extractor-results">Merging Extractor results</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#converters">Converters</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#implicit-stim-conversion">Implicit Stim conversion</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#package-wide-conversion-defaults">Package-wide conversion defaults</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#list-of-converter-classes">List of Converter classes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#filters">Filters</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#list-of-filter-classes">List of Filter classes</a><ul class="simple">
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#iterable-aware-transformations">Iterable-aware transformations</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="graphs.html">Graphs</a></li>
<li class="toctree-l1"><a class="reference internal" href="config.html">Configuring pliers</a></li>
<li class="toctree-l1"><a class="reference internal" href="reference.html">Pliers API Reference</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">pliers</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Transformers</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/transformers.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="transformers">
<h1>Transformers<a class="headerlink" href="#transformers" title="Permalink to this headline">¶</a></h1>
<p>As the name suggests, a <code class="xref py py-class docutils literal"><span class="pre">Transformer</span></code> is a kind of object that transforms other objects. In pliers, every <code class="xref py py-class docutils literal"><span class="pre">Transformer</span></code> always takes a single <code class="xref py py-class docutils literal"><span class="pre">Stim</span></code> as its input, though it can return different outputs. The <code class="xref py py-class docutils literal"><span class="pre">Transformer</span></code> API in pliers is modeled loosely on the widely-used scikit-learn API; as such, what defines a <code class="xref py py-class docutils literal"><span class="pre">Transformer</span></code>, from a user’s perspective, is that one can always call pass a <code class="xref py py-class docutils literal"><span class="pre">Stim</span></code> instance to <code class="xref py py-class docutils literal"><span class="pre">Transformer</span></code>’s .transform() method and expect to get another object as a result.</p>
<p>In practice, most users should never have any reason to directly instantiate the base <code class="xref py py-class docutils literal"><span class="pre">Transformer</span></code> class. We will almost invariably work with one of three different <code class="xref py py-class docutils literal"><span class="pre">Transformer</span></code> sub-classes: <code class="xref py py-class docutils literal"><span class="pre">Extractor</span></code>, <code class="xref py py-class docutils literal"><span class="pre">Converter</span></code>, and <code class="xref py py-class docutils literal"><span class="pre">Filter</span></code>. These classes are distinguished by the type of output that their respective <code class="code py python docutils literal"><span class="operator"><span class="pre">.</span></span><span class="name"><span class="pre">transform</span></span><span class="punctuation"><span class="pre">()</span></span></code> methods produce:</p>
<table border="1" class="docutils">
<colgroup>
<col width="46%" />
<col width="14%" />
<col width="41%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Transformer class</th>
<th class="head">Input</th>
<th class="head">Output</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Extractor</td>
<td>AStim</td>
<td>ExtractorResult</td>
</tr>
<tr class="row-odd"><td>Converter</td>
<td>AStim</td>
<td>BStim</td>
</tr>
<tr class="row-even"><td>Filter</td>
<td>AStim</td>
<td>AStim</td>
</tr>
</tbody>
</table>
<p>Here, AStim and BStim are different <code class="xref py py-class docutils literal"><span class="pre">Stim</span></code> subclasses. So an <code class="xref py py-class docutils literal"><span class="pre">Extractor</span></code> always returns an <code class="xref py py-class docutils literal"><span class="pre">ExtractorResult</span></code>, no matter what type of <code class="xref py py-class docutils literal"><span class="pre">Stim</span></code> it receives as input. A <code class="xref py py-class docutils literal"><span class="pre">Converter</span></code> and a <code class="xref py py-class docutils literal"><span class="pre">Filter</span></code> are distinguished by the fact that a <code class="xref py py-class docutils literal"><span class="pre">Converter</span></code> always returns a <code class="xref py py-class docutils literal"><span class="pre">Stim</span></code> of a different class than its input, while a <code class="xref py py-class docutils literal"><span class="pre">Filter</span></code> always returns a <code class="xref py py-class docutils literal"><span class="pre">Stim</span></code> of the same type as its input. This simple hierarchy turns out to be extremely powerful, as it enables us to operate in a natural, graph-like way over <code class="xref py py-class docutils literal"><span class="pre">Stim</span></code>s, by filtering and converting them as needed before applying one or more Extractors to obtain extracted feature values.</p>
<p>Let’s examine each of these <code class="xref py py-class docutils literal"><span class="pre">Transformer</span></code> types more carefully.</p>
<div class="section" id="extractors">
<h2>Extractors<a class="headerlink" href="#extractors" title="Permalink to this headline">¶</a></h2>
<p><code class="xref py py-class docutils literal"><span class="pre">Extractor</span></code>s are the most important kind of <code class="xref py py-class docutils literal"><span class="pre">Transformer</span></code> in pliers, and in many cases, users will never have to touch any other kind of <code class="xref py py-class docutils literal"><span class="pre">Transformer</span></code> directly. Every <code class="xref py py-class docutils literal"><span class="pre">Extractor</span></code> implements a <code class="code py python docutils literal"><span class="name"><span class="pre">transform</span></span><span class="punctuation"><span class="pre">()</span></span></code> method that takes a <code class="xref py py-class docutils literal"><span class="pre">Stim</span></code> object as its first argument, and returns an object of class <code class="xref py py-class docutils literal"><span class="pre">ExtractorResult</span></code> (see below). For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># Google Cloud Vision API face detection</span>
<span class="kn">from</span> <span class="nn">pliers.extractors</span> <span class="kn">import</span> <span class="n">GoogleVisionAPIFaceExtractor</span>

<span class="n">ext</span> <span class="o">=</span> <span class="n">GoogleVisionAPIExtractor</span><span class="p">()</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">ext</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="s1">&#39;my_image.jpg&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="section" id="list-of-extractor-classes">
<h3>List of Extractor classes<a class="headerlink" href="#list-of-extractor-classes" title="Permalink to this headline">¶</a></h3>
<p>At present, pliers implements several dozen <code class="xref py py-class docutils literal"><span class="pre">Extractor</span></code> classes that span a wide variety of input modalities and types of extracted features. These include:</p>
<p><strong>Audio feature extractors</strong></p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">ChromaCENSExtractor</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">ChromaCQTExtractor</span></code></td>
<td></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">ChromaSTFTExtractor</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">MeanAmplitudeExtractor</span></code></td>
<td></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">MelspectrogramExtractor</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">MFCCExtractor</span></code></td>
<td></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">PolyFeaturesExtractor</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">RMSEExtractor</span></code></td>
<td></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">SpectralCentroidExtractor</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">SpectralBandwidthExtractor</span></code></td>
<td></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">SpectralContrastExtractor</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">SpectralRolloffExtractor</span></code></td>
<td></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">STFTAudioExtractor</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">TempogramExtractor</span></code></td>
<td></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">TonnetzExtractor</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">ZeroCrossingRateExtractor</span></code></td>
<td></td>
</tr>
</tbody>
</table>
<p><strong>Image feature extractors</strong></p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">BrightnessExtractor</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">ClarifaiAPIExtractor</span></code></td>
<td></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">FaceRecognitionFaceEncodingsExtractor</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">FaceRecognitionFaceLandmarksExtractor</span></code></td>
<td></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">FaceRecognitionFaceLocationsExtractor</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">GoogleVisionAPIFaceExtractor</span></code></td>
<td></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">GoogleVisionAPILabelExtractor</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">GoogleVisionAPIPropertyExtractor</span></code></td>
<td></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">GoogleVisionAPISafeSearchExtractor</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">GoogleVisionAPIWebEntitiesExtractor</span></code></td>
<td></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">IndicoAPIImageExtractor</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">SaliencyExtractor</span></code></td>
<td></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">SharpnessExtractor</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">TensorFlowInceptionV3Extractor</span></code></td>
<td></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">VibranceExtractor</span></code></td>
<td></td>
</tr>
</tbody>
</table>
<p><strong>Text feature extractors</strong></p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">ComplexTextExtractor</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">DictionaryExtractor</span></code></td>
<td></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">IndicoAPITextExtractor</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">LengthExtractor</span></code></td>
<td></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">NumUniqueWordsExtractor</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">PartOfSpeechExtractor</span></code></td>
<td></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">PredefinedDictionaryExtractor</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">TextVectorizerExtractor</span></code></td>
<td></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">VADERSentimentExtractor</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">WordEmbeddingExtractor</span></code></td>
<td></td>
</tr>
</tbody>
</table>
<p><strong>Video feature extractors</strong></p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">FarnebackOpticalFlowExtractor</span></code></td>
<td></td>
</tr>
</tbody>
</table>
<p>Note that, in practice, the number of features one can extract using the above classes is extremely large, because many of these Extractors return open-ended feature sets that are determined by the contents of the input <code class="xref py py-class docutils literal"><span class="pre">Stim</span></code> and/or the specified initialization arguments. For example, most of the image-labeling Extractors that rely on deep learning-based services (e.g., <code class="xref py py-class docutils literal"><span class="pre">GoogleVisionAPILabelExtractor</span></code> and <code class="xref py py-class docutils literal"><span class="pre">ClarifaiAPIExtractor</span></code>) will return feature information for any of the top N objects detected in the image. And the <code class="xref py py-class docutils literal"><span class="pre">PredefinedDictionaryExtractor</span></code> provides a standardized interface to a large number of online word lookup dictionaries (e.g., word norms for written frequency, age-of-acquisition, emotionality ratings, etc.).</p>
</div>
<div class="section" id="the-extractorresult-class">
<h3>The ExtractorResult class<a class="headerlink" href="#the-extractorresult-class" title="Permalink to this headline">¶</a></h3>
<p>Calling transform() on an instantiated <code class="xref py py-class docutils literal"><span class="pre">Extractor</span></code> returns an object of class <code class="xref py py-class docutils literal"><span class="pre">ExtractorResult</span></code>. This is a lightweight container that contains all of the extracted feature information returned by the <code class="xref py py-class docutils literal"><span class="pre">Extractor</span></code>, and also stores references to the <code class="xref py py-class docutils literal"><span class="pre">Stim</span></code> and <code class="xref py py-class docutils literal"><span class="pre">Extractor</span></code> objects used to generate the result. The raw extracted feature values are stored in the .data property, but typically, we’ll want to work with the data in a more convenient format. Fortunately, every <code class="xref py py-class docutils literal"><span class="pre">ExtractorResult</span></code> instance exposes a .to_df() methods that gives us a nice pandas DataFrame. You can refer back to our first Quickstart example to see this in action.</p>
</div>
<div class="section" id="merging-extractor-results">
<h3>Merging Extractor results<a class="headerlink" href="#merging-extractor-results" title="Permalink to this headline">¶</a></h3>
<p>In most cases, we’ll want to do more than just apply a single <code class="xref py py-class docutils literal"><span class="pre">Extractor</span></code> to a single <code class="xref py py-class docutils literal"><span class="pre">Stim</span></code>. We might want to apply an <code class="xref py py-class docutils literal"><span class="pre">Extractor</span></code> to a set of stims (e.g., to run the GoogleVisionAPIFaceExtractor on a whole bunch of images), or to apply several different Extractors to a single <code class="xref py py-class docutils literal"><span class="pre">Stim</span></code> (e.g., to run both face recognition and object recognition services on each image). As we’ll see later (in the section on <code class="xref py py-class docutils literal"><span class="pre">Graph</span></code>s), pliers makes it easy to apply many Extractors to many <code class="xref py py-class docutils literal"><span class="pre">Stim</span></code>s, and in such cases, it will automatically merge the extracted feature data into one big pandas DataFrame. But in cases where we’re working with multiple results manually, we can still merge the results ourselves, using the appropriately named merge_results function.</p>
<p>Suppose we have a list of images, and we want to run both face recognition and object labeling on each image. Then we can do the following:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pliers.extractors</span> <span class="kn">import</span> <span class="p">(</span><span class="n">GoogleVisionAPIFaceExtractor</span><span class="p">,</span> <span class="n">GoogleVisionAPILabelExtractor</span><span class="p">)</span>
<span class="n">my_images</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;file1.jpg&#39;</span><span class="p">,</span> <span class="s1">&#39;file2.jpg&#39;</span><span class="p">,</span> <span class="o">...</span><span class="p">]</span>

<span class="n">face_ext</span> <span class="o">=</span> <span class="n">GoogleVisionAPIFaceExtractor</span><span class="p">()</span>
<span class="n">face_feats</span> <span class="o">=</span> <span class="n">face_ext</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">my_images</span><span class="p">)</span>

<span class="n">lab_ext</span> <span class="o">=</span> <span class="n">GoogleVisionAPILabelExtractor</span><span class="p">()</span>
<span class="n">lab_feats</span> <span class="o">=</span> <span class="n">lab_ext</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">my_images</span><span class="p">)</span>
</pre></div>
</div>
<p>Now each of face_feats and lab_feats is a list of <code class="xref py py-class docutils literal"><span class="pre">ExtractorResult</span></code> objects. We could explicitly convert each element in each list to a pandas DataFrame (by calling .to_df()), but that would still be pretty unwieldy, as we would still need to figure out how to merge those DataFrames in a sensible way. Fortunately, merge_results will do all the work for us:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pliers.extractors</span> <span class="kn">import</span> <span class="n">merge_results</span>
<span class="c1"># merge_results expects a single list, so we concatenate our two lists</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">merge_results</span><span class="p">(</span><span class="n">face_feats</span> <span class="o">+</span> <span class="n">lab_feats</span><span class="p">)</span>
</pre></div>
</div>
<p>In the resulting DataFrame, every <code class="xref py py-class docutils literal"><span class="pre">Stim</span></code> is represented in a different row, and every feature is represented in a separate column. As noted earlier, the resulting DataFrame contains much more information than what’s returned when we call to_df() on a single <code class="xref py py-class docutils literal"><span class="pre">ExtractorResult</span></code> object. Extra columns injected into the merged result include the name, class, filename (if any) and transformation history of each <code class="xref py py-class docutils literal"><span class="pre">Stim</span></code>; the name of each feature returned by each <code class="xref py py-class docutils literal"><span class="pre">Extractor</span></code>; and the name of each <code class="xref py py-class docutils literal"><span class="pre">Extractor</span></code> (as a second level in the column MultiIndex). You can prevent some of this additional information from being added by setting the <code class="code py python docutils literal"><span class="name"><span class="pre">extractor_names</span></span></code> and <code class="code py python docutils literal"><span class="name"><span class="pre">stim_names</span></span></code> arguments in <code class="xref py py-func docutils literal"><span class="pre">merge_results()</span></code> to <code class="code py python docutils literal"><span class="name builtin pseudo"><span class="pre">False</span></span></code> (by default, both are <code class="code py python docutils literal"><span class="name builtin pseudo"><span class="pre">True</span></span></code>).</p>
</div>
</div>
<div class="section" id="converters">
<h2>Converters<a class="headerlink" href="#converters" title="Permalink to this headline">¶</a></h2>
<p>Converters, as their name suggests, convert <code class="xref py py-class docutils literal"><span class="pre">Stim</span></code> classes from one type to another. For example, the <code class="xref py py-class docutils literal"><span class="pre">IBMSpeechAPIConverter</span></code>, which is a subclass of <code class="xref py py-class docutils literal"><span class="pre">AudioToTextConverter</span></code>, takes an <code class="xref py py-class docutils literal"><span class="pre">AudioStim</span></code> as input, queries IBM’s Watson speech-to-text API, and returns a transcription of the audio as a <code class="xref py py-class docutils literal"><span class="pre">ComplexTextStim</span></code> object. Most <code class="xref py py-class docutils literal"><span class="pre">Converter</span></code> classes have sensible names that clearly indicate what they do, but to prevent any ambiguity (and support type-checking), every concrete <code class="xref py py-class docutils literal"><span class="pre">Converter</span></code> class must define <code class="code py python docutils literal"><span class="name"><span class="pre">_input_type</span></span></code> and <code class="code py python docutils literal"><span class="name"><span class="pre">_output_type</span></span></code> properties that indicate what <code class="xref py py-class docutils literal"><span class="pre">Stim</span></code> classes they take and return as input and output, respectively.</p>
<div class="section" id="implicit-stim-conversion">
<h3>Implicit Stim conversion<a class="headerlink" href="#implicit-stim-conversion" title="Permalink to this headline">¶</a></h3>
<p>Although Converters play a critical role in pliers, they usually don’t need to be invoked explicitly by users, as pliers can usually figure out what conversions must be performed and carry them out implicitly. For example, suppose we want to run the <code class="xref py py-class docutils literal"><span class="pre">STFTAudioExtractor</span></code>—which computes the short-time Fourier transform on an audio clip and returns its power spectrum—on the audio track of a movie clip. We don’t need to explicitly convert the <code class="xref py py-class docutils literal"><span class="pre">VideoStim</span></code> to an <code class="xref py py-class docutils literal"><span class="pre">AudioStim</span></code>, because pliers is clever enough to determine that it can get the appropriate input for the <code class="xref py py-class docutils literal"><span class="pre">STFTAudioExtractor</span></code> by executing the <code class="xref py py-class docutils literal"><span class="pre">VideoToAudioConverter</span></code>. In practice, then, the following two snippets produce identical results:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pliers.extractors</span> <span class="kn">import</span> <span class="n">STFTAudioExtractor</span>
<span class="kn">from</span> <span class="nn">pliers.stimuli</span> <span class="kn">import</span> <span class="n">VideoStim</span>
<span class="n">video</span> <span class="o">=</span> <span class="n">VideoStim</span><span class="p">(</span><span class="s1">&#39;my_movie.mp4&#39;</span><span class="p">)</span>

<span class="c1"># Option A: explicit conversion</span>
<span class="kn">from</span> <span class="nn">pliers.converters</span> <span class="kn">import</span> <span class="n">VideoToAudioConverter</span>
<span class="n">conv</span> <span class="o">=</span> <span class="n">VideoToAudioConverter</span><span class="p">()</span>
<span class="n">audio</span> <span class="o">=</span> <span class="n">conv</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">video</span><span class="p">)</span>
<span class="n">ext</span> <span class="o">=</span> <span class="n">STFTAudioExtractor</span><span class="p">(</span><span class="n">freq_bins</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">ext</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">audio</span><span class="p">)</span>

<span class="c1"># Option B: implicit conversion</span>
<span class="n">ext</span> <span class="o">=</span> <span class="n">STFTAudioExtractor</span><span class="p">(</span><span class="n">freq_bins</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">ext</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">video</span><span class="p">)</span>
</pre></div>
</div>
<p>Because pliers contains a number of “multistep” <code class="xref py py-class docutils literal"><span class="pre">Converter</span></code> classes, which chain together multiple standard Converters, implicit <code class="xref py py-class docutils literal"><span class="pre">Stim</span></code> conversion will typically work not only for a single conversion, but also for a whole series of them. For example, if you feed a video file to a <code class="xref py py-class docutils literal"><span class="pre">LengthExtractor</span></code> (which just counts the number of characters in each TextStim’s text), pliers will use the built-in VideoToTextConverter class to transform your <code class="xref py py-class docutils literal"><span class="pre">VideoStim</span></code> into a <code class="xref py py-class docutils literal"><span class="pre">TextStim</span></code>, and everything should work smoothly in most cases.</p>
<p>I say “most” cases, because there are two important gotchas to be aware of when relying on implicit conversion. First, sometimes there’s an inherent ambiguity about what trajectory a given stimulus should take through converter space; in such cases, the default conversions pliers performs may not line up with your expectations. For example, a <code class="xref py py-class docutils literal"><span class="pre">VideoStim</span></code> can be converted to a <code class="xref py py-class docutils literal"><span class="pre">TextStim</span></code> either by (a) extracting the audio track from the video and then transcribing into text via a speech recognition service, or (b) extracting the video frames from the video and then attempting to detect any text labels within each image. Because pliers has no way of knowing which of these you’re trying to accomplish, it will default to the first. The upshot is that if you think there’s any chance of ambiguity in the conversion process, it’s probably a good idea to explicitly chain the <code class="xref py py-class docutils literal"><span class="pre">Converter</span></code> steps (you can do this very easily using the <code class="xref py py-class docutils literal"><span class="pre">Graph</span></code> interface discussed below). The explicit approach also provides additional precision in that you may want to initialize a particular <code class="xref py py-class docutils literal"><span class="pre">Converter</span></code> with non-default arguments, and/or specify exactly which of several candidate <code class="xref py py-class docutils literal"><span class="pre">Converter</span></code> classes to use (e.g., pliers defaults to performing speech-to-text conversion via the IBM Watson API, but also provides alternative support for the Wit.AI, and Google Cloud Speech APIs services).</p>
<div class="section" id="package-wide-conversion-defaults">
<span id="conversion-defaults"></span><h4>Package-wide conversion defaults<a class="headerlink" href="#package-wide-conversion-defaults" title="Permalink to this headline">¶</a></h4>
<p>Alternatively, you can set the default Converter(s) to use for any implicit <code class="xref py py-class docutils literal"><span class="pre">Stim</span></code> conversion at a package-wide level, via the config.default_converters attribute. By default, this is something like:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">default_converters</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;AudioStim-&gt;TextStim&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s1">&#39;IBMSpeechAPIConverter&#39;</span><span class="p">,</span> <span class="s1">&#39;WitTranscriptionConverter&#39;</span><span class="p">),</span>
    <span class="s1">&#39;ImageStim-&gt;TextStim&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s1">&#39;GoogleVisionAPITextConverter&#39;</span><span class="p">,</span> <span class="s1">&#39;TesseractConverter&#39;</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Here, each entry in the default_converters dictionary lists the Converter(s) to use, in order of preference. For example, the above indicates that any conversion between <code class="xref py py-class docutils literal"><span class="pre">ImageStim</span></code> and <code class="xref py py-class docutils literal"><span class="pre">TextStim</span></code> should first try to use the <code class="xref py py-class docutils literal"><span class="pre">GoogleVisionAPITextConverter</span></code>, and then, if that fails (e.g., because the user has no Google Cloud Vision API key set up), fall back on the <code class="xref py py-class docutils literal"><span class="pre">TesseractConverter</span></code>. If all selections specified in the config fail, pliers will still try to use any matching Converters it finds, but you’ll lose the ability to control the order of selection.</p>
<p>Second, because many Converters call API-based services, if you’re going to rely on implicit conversion, you should make sure that any API keys you might need are properly set up as environment variables in your local environment, seeing as you’re not going to be able to pass those keys to the Converter as initialization arguments. For example, by default, pliers uses the IBM Watson API for speech-to-text conversion (i.e., when converting an <code class="xref py py-class docutils literal"><span class="pre">AudioStim</span></code> to a <code class="xref py py-class docutils literal"><span class="pre">ComplexTextStim</span></code>). But since you won’t necessarily know this ahead of time, you won’t be able to initialize the Converter with the correct credentials–i.e., by calling <code class="code py python docutils literal"><span class="name"><span class="pre">IBMSpeechAPIConverter</span></span><span class="punctuation"><span class="pre">(</span></span><span class="name"><span class="pre">username</span></span><span class="operator"><span class="pre">=</span></span><span class="literal string single"><span class="pre">’my_username’</span></span><span class="punctuation"><span class="pre">,</span></span> <span class="name"><span class="pre">password</span></span><span class="operator"><span class="pre">=</span></span><span class="literal string single"><span class="pre">’my_password’</span></span><span class="punctuation"><span class="pre">)</span></span></code>. Instead, the Converter will get initialized without any arguments (<code class="code py python docutils literal"><span class="name"><span class="pre">IBMSpeechAPIConverter</span></span><span class="punctuation"><span class="pre">()</span></span></code>), which means the initialization logic will immediately proceed to look for IBM_USERNAME and IBM_PASSWORD variables in the environment, and will raise an exception if at least one of these variables is missing. So make sure as many API keys as possible are appropriately set in the environment. You can read more about this in the API keys section.</p>
</div>
</div>
<div class="section" id="list-of-converter-classes">
<h3>List of Converter classes<a class="headerlink" href="#list-of-converter-classes" title="Permalink to this headline">¶</a></h3>
<p>Pliers currently implements the following <code class="xref py py-class docutils literal"><span class="pre">Converter</span></code> classes:</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">ComplexTextIterator</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">IBMSpeechAPIConverter</span></code></td>
<td></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">GoogleSpeechAPIConverter</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">GoogleVisionAPITextConverter</span></code></td>
<td></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">TesseractConverter</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">VideoFrameCollectionIterator</span></code></td>
<td></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">VideoFrameIterator</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">VideoToAudioConverter</span></code></td>
<td></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">VideoToComplexTextConverter</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">VideoToTextConverter</span></code></td>
<td></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">WitTranscriptionConverter</span></code></td>
<td></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="filters">
<h2>Filters<a class="headerlink" href="#filters" title="Permalink to this headline">¶</a></h2>
<p>A <code class="code py python docutils literal"><span class="name"><span class="pre">Filter</span></span></code> is a kind of <code class="xref py py-class docutils literal"><span class="pre">Transformer</span></code> that returns an object of the same <code class="xref py py-class docutils literal"><span class="pre">Stim</span></code> class as its input. Filters can be used for tasks like image or audio filtering, text tokenization or sanitization, and many other things. The defining feature of a <code class="xref py py-class docutils literal"><span class="pre">Filter</span></code> class is simply that it must return a <code class="xref py py-class docutils literal"><span class="pre">Stim</span></code> of the same type as the input passed to the <code class="code py python docutils literal"><span class="operator"><span class="pre">.</span></span><span class="name"><span class="pre">transform</span></span><span class="punctuation"><span class="pre">()</span></span></code> method (e.g., passing in an <code class="xref py py-class docutils literal"><span class="pre">ImageStim</span></code> and getting back another, modified, <code class="xref py py-class docutils literal"><span class="pre">ImageStim</span></code>).</p>
<div class="section" id="list-of-filter-classes">
<h3>List of Filter classes<a class="headerlink" href="#list-of-filter-classes" title="Permalink to this headline">¶</a></h3>
<p>Pliers currently implements the following <code class="xref py py-class docutils literal"><span class="pre">Filter</span></code> classes:</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">FrameSamplingFilter</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">ImageCroppingFilter</span></code></td>
<td></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">PillowImageFilter</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">PunctuationRemovalFilter</span></code></td>
<td></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">TokenizingFilter</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">TokenRemovalFilter</span></code></td>
<td></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">WordStemmingFilter</span></code></td>
<td></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="iterable-aware-transformations">
<h2>Iterable-aware transformations<a class="headerlink" href="#iterable-aware-transformations" title="Permalink to this headline">¶</a></h2>
<p>A useful feature of the <code class="xref py py-class docutils literal"><span class="pre">Transformer</span></code> API is that it’s inherently iterable-aware: every pliers <code class="xref py py-class docutils literal"><span class="pre">Transformer</span></code> (including all Extractors, Converters, and Filters) can be passed an iterable (specifically, a list, tuple, or generator) of <code class="xref py py-class docutils literal"><span class="pre">Stim</span></code> objects rather than just a single <code class="xref py py-class docutils literal"><span class="pre">Stim</span></code>. The transformation will then be applied independently to each <code class="xref py py-class docutils literal"><span class="pre">Stim</span></code>.</p>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="stimuli.html" class="btn btn-neutral" title="Stims" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Developers of pliers.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.2',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>